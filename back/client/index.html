<html>
  <head>
    <script src="https://cdn.socket.io/4.3.2/socket.io.min.js" crossorigin="anonymous"></script>
    <script>
      const socket = io('http://localhost:3000');

      function addMessage(source, message) {
        const messageBox = document.getElementById('messageBox');
        const messageElement = document.createElement('div');
        messageElement.classList.add('message');

        const sourceElement = document.createElement('span');
        sourceElement.classList.add('source');
        sourceElement.textContent = `[${source}] `;

        const contentElement = document.createElement('div');
        contentElement.classList.add('content');
        contentElement.textContent = typeof message === 'object' ? JSON.stringify(message) : message;

        messageElement.appendChild(sourceElement);
        messageElement.appendChild(contentElement);
        messageBox.appendChild(messageElement);
        messageBox.scrollTop = messageBox.scrollHeight;
      }

      socket.on('connect', function () {
        console.log('Connected to RoomGateway');
        addMessage('RoomGateway', 'Connected');
      });

      socket.on('roomCreated', function (data) {
        addMessage('RoomGateway', `Room Created: ${data.code}`);
        document.getElementById('roomCode').value = data.code;
      });

      socket.on('userJoined', function (data) {
        addMessage('RoomGateway', `User Joined: ${JSON.stringify(data)}`);
      });

      socket.on('error', function (data) {
        addMessage('RoomGateway', `Error: ${JSON.stringify(data)}`);
      });

      function createRoom() {
        socket.emit('createRoom', {
          host: { name: 'Player1', avatar: 'avatar1.png' },
          room: { password: '1234', maxPlayers: 4, maxRounds: 3 }
        });
      }

      function joinRoom() {
        const roomCode = document.getElementById('roomCode').value;
        if (!roomCode) return alert('Enter a room code');
        
        socket.emit('joinRoom', {
          code: roomCode,
          player: { name: 'Player2', avatar: 'avatar2.png' },
          password: '1234'
        });
      }
    </script>
    <style>
      body { display: flex; flex-direction: column; align-items: center; background-color: #141414; color: #fff; font-family: Arial; }
      #messageBox { border: 1px solid #444; padding: 10px; width: 400px; height: 300px; overflow-y: auto; background-color: #1e1e1e; }
      .message { padding: 5px; background: #333; margin: 5px 0; }
      .source { font-weight: bold; color: #d56be0; }
      button, input { margin: 5px; padding: 10px; }
    </style>
  </head>
  <body>
    <h1>WebSocket Messages</h1>
    <button onclick="createRoom()">Create Room</button>
    <input id="roomCode" placeholder="Enter Room Code" />
    <button onclick="joinRoom()">Join Room</button>
    <div id="messageBox"></div>
  </body>
</html>
